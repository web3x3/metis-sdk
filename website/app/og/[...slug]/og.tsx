import { ImageResponse } from "next/og";
import type { ReactElement, ReactNode } from "react";
import type { ImageResponseOptions } from "next/dist/compiled/@vercel/og/types";

interface GenerateProps {
  title: ReactNode;
  description?: ReactNode;
  primaryTextColor?: string;
}

export function generateOGImage(
  options: GenerateProps & ImageResponseOptions
): ImageResponse {
  const { title, description, primaryTextColor, ...rest } = options;

  return new ImageResponse(
    generate({
      title,
      description,
      primaryTextColor,
    }),
    {
      width: 1200,
      height: 630,
      ...rest,
    }
  );
}

export function generate({
  primaryTextColor = "rgb(240,240,240)",
  ...props
}: GenerateProps): ReactElement {
  return (
    <div
      style={{
        display: "flex",
        flexDirection: "column",
        width: "100%",
        height: "100%",
        color: "white",
        backgroundColor: "rgb(10,10,10)",
      }}
    >
      <div
        style={{
          display: "flex",
          flexDirection: "column",
          width: "100%",
          height: "100%",
          padding: "4rem",
        }}
      >
        <p
          style={{
            fontWeight: 600,
            fontSize: "76px",
          }}
        >
          {props.title}
        </p>
        <p
          style={{
            fontSize: "48px",
            color: "rgba(240,240,240,0.7)",
          }}
        >
          {props.description}
        </p>
        <div
          style={{
            display: "flex",
            flexDirection: "row",
            alignItems: "center",
            justifyContent: "flex-end",
            gap: "24px",
            marginTop: "auto",
            color: primaryTextColor,
          }}
        >
          <svg
            width="324"
            height="117"
            viewBox="0 0 3000 1075"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_307_11)">
              <path
                d="M1074.93 537.47C1074.93 240.63 834.3 0 537.46 0C240.62 0 0 240.63 0 537.47C0 834.31 240.63 1074.93 537.46 1074.93C834.29 1074.93 1074.93 834.3 1074.93 537.47Z"
                fill="#00D2FF"
              />
              <path
                d="M900.18 510.64C900.18 509.36 876.92 494.5 864.67 486.74C859.374 483.421 854.455 479.534 850 475.15C840.84 466.09 825.57 450.26 820.59 440.52C817.4 434.29 818.71 423.08 821.19 412.38C825.489 393.606 822.235 373.895 812.13 357.5L796.21 331.57C788.878 319.744 782.986 307.084 778.66 293.86C773.165 276.861 763.601 261.461 750.8 249C724.9 223.73 653.2 211.29 593.64 209.3C589.957 208.199 586.214 207.311 582.43 206.64C555.9 202.12 527.63 194.83 502.25 199.57C464.56 206.57 426.46 218.39 398.03 247.57C392.29 253.45 383.34 256.23 377.16 261.8C364.92 272.85 348.43 272.85 337.55 285.13C331.18 292.28 328.24 315.65 311.55 324.58C283.94 339.38 263.55 355.68 256.81 364.01C251.75 370.26 247.81 377.58 242.9 384.01C237.9 390.57 214.09 401.67 207.17 408.61C200.25 415.55 190.99 432.45 195.17 452.42C195.56 454.24 195.88 455.74 196.17 456.96C198.89 467.11 206.29 485.51 204.58 493.96C202.58 503.96 176.91 578.37 234.29 598.2C246.29 602.34 251.29 610.39 252.61 622.64C253.789 632.562 256.625 642.216 261 651.2C266.22 662.2 276.51 668.2 277.35 668.94C280.81 671.94 296.91 688.8 298.24 691.25C318.6 728.88 312.88 747.68 351.85 760.47C361.864 763.778 371.48 768.189 380.52 773.62C391.541 780.239 403.341 785.466 415.65 789.18C416.01 789.28 416.55 789.47 417.19 789.7C425.85 768.78 434.63 748.94 443.38 730.26C373.22 658.33 391.67 577.74 398.38 556.15C398.576 555.506 398.931 554.923 399.412 554.453C399.893 553.983 400.485 553.642 401.133 553.462C401.781 553.281 402.464 553.267 403.119 553.421C403.774 553.574 404.38 553.89 404.88 554.34C419.6 567.24 464.36 613.76 459.11 697.76C474.59 666.84 489.64 639.66 503.39 616.44C452.77 530.65 490.49 455.44 502.39 435.62C502.731 435.026 503.219 434.53 503.806 434.179C504.394 433.828 505.062 433.633 505.747 433.614C506.431 433.595 507.109 433.752 507.715 434.07C508.322 434.388 508.836 434.856 509.21 435.43C519.53 450.75 547.58 500.98 530.21 573.34C542.8 554.1 553.02 539.85 559.7 530.91C577.82 411.29 668.16 372 691.9 363.72C692.536 363.488 693.221 363.421 693.89 363.526C694.559 363.631 695.191 363.904 695.725 364.32C696.26 364.736 696.681 365.281 696.947 365.903C697.214 366.526 697.318 367.206 697.25 367.88C695.06 392.61 679.81 487.88 575.03 536.79C562.43 553.38 550.3 570.84 538.7 588.79C578.77 557.48 634.91 542.79 681.58 554.06C682.239 554.209 682.85 554.521 683.357 554.966C683.865 555.412 684.254 555.977 684.488 556.61C684.723 557.244 684.795 557.926 684.7 558.595C684.604 559.263 684.343 559.898 683.94 560.44C670.53 578.2 617.18 638.09 516.67 624.37C499.67 653 484.12 682.02 470.3 709.76C513.71 676.93 577.12 664.35 626.3 680.88C626.956 681.089 627.548 681.46 628.023 681.958C628.498 682.457 628.841 683.066 629.019 683.731C629.197 684.396 629.205 685.095 629.043 685.764C628.881 686.433 628.553 687.051 628.09 687.56C612.81 704 553.98 757.98 457.25 736.56C448.18 755.72 434.66 787.23 428.06 802.8C425.79 808.16 423.7 813.57 421.84 819.08C417.56 831.76 411.79 847.58 404.92 863.42C403.951 865.679 403.457 868.113 403.468 870.572C403.479 873.03 403.995 875.46 404.984 877.71C405.974 879.961 407.415 881.984 409.219 883.654C411.022 885.324 413.15 886.606 415.47 887.42C491.8 914.669 574.672 917.742 652.81 896.22C655.392 895.487 657.775 894.182 659.781 892.4C661.788 890.618 663.367 888.407 664.4 885.93C666.03 882.07 667.64 878.41 667.64 878.41C667.64 878.41 701.42 800 706.39 765.83C707.807 755.06 711.154 744.633 716.27 735.05C718.905 730.261 722.715 726.223 727.343 723.315C731.971 720.407 737.263 718.726 742.72 718.43C768.43 717.07 823.18 713.48 843.1 707.17C869.57 698.76 858.1 650.54 856.67 645.35C855.24 640.16 869.41 628.07 872.32 621.02C875.23 613.97 865.16 611.55 861.05 603.8C856.94 596.05 871.26 590.5 873.3 583.47C875.34 576.44 868.64 568.72 865.93 563.53C864.12 559.831 862.854 555.89 862.17 551.83C862.17 551.83 881.54 537.65 891.83 528.7C902.12 519.75 900.21 512.38 900.18 510.64Z"
                fill="black"
              />
              <path
                d="M1611.91 717.38V503.01L1534.37 659.1H1488.76L1411.22 503.01V717.38H1328.1V357.56H1418.31L1511.57 545.58L1605.32 357.56H1695.02V717.38H1611.91Z"
                fill="white"
              />
              <path
                d="M2067.51 644.4V717.38H1814.62V357.56H2062.95V430.53H1897.73V500.47H2039.63V567.87H1897.73V644.4H2067.51Z"
                fill="white"
              />
              <path
                d="M2443.04 430.53H2333.58V717.38H2250.46V430.53H2140.49V357.56H2443.04V430.53Z"
                fill="white"
              />
              <path
                d="M2617.38 357.56H2534.26V717.38H2617.38V357.56Z"
                fill="white"
              />
              <path
                d="M2952.86 463.47C2951.85 461.79 2948.3 459.173 2942.22 455.62C2934.83 451.412 2927.22 447.606 2919.42 444.22C2909.72 439.955 2899.73 436.399 2889.52 433.58C2878.97 430.572 2868.05 429.037 2857.08 429.02C2842.89 429.02 2831.91 431.453 2824.14 436.32C2816.37 441.187 2812.48 448.65 2812.48 458.71C2812.48 466.757 2815.44 473.13 2821.35 477.83C2827.26 482.53 2835.8 486.643 2846.95 490.17C2858.09 493.69 2871.77 497.797 2888 502.49C2910.97 508.53 2930.9 515.83 2947.8 524.39C2964.7 532.95 2977.62 543.95 2986.57 557.39C2995.52 570.79 3000 588.56 3000 610.7C3000 630.84 2996.28 647.87 2988.85 661.79C2981.74 675.348 2971.37 686.933 2958.69 695.51C2945.5 704.291 2930.81 710.597 2915.36 714.12C2898.92 718.006 2882.08 719.949 2865.19 719.91C2847.06 719.859 2828.98 718.078 2811.19 714.59C2793.1 711.141 2775.36 706.053 2758.19 699.39C2741.83 693.074 2726.2 685.003 2711.57 675.32L2748.06 602.85C2749.39 604.536 2753.79 607.66 2761.24 612.22C2770.13 617.542 2779.36 622.282 2788.86 626.41C2800.76 631.64 2813.04 635.959 2825.6 639.33C2838.97 643.036 2852.78 644.913 2866.65 644.91C2881.51 644.91 2892.58 642.593 2899.85 637.96C2907.12 633.327 2910.75 626.876 2910.74 618.61C2910.74 609.536 2906.94 602.48 2899.34 597.44C2891.74 592.4 2881.43 587.867 2868.42 583.84C2855.41 579.84 2840.46 575.303 2823.57 570.23C2801.57 563.51 2783.41 555.95 2769.09 547.55C2754.77 539.15 2744.13 528.903 2737.16 516.81C2730.24 504.71 2726.78 489.587 2726.78 471.44C2726.78 446.24 2732.78 424.99 2744.78 407.69C2756.78 390.39 2772.91 377.287 2793.17 368.38C2813.48 359.46 2835.63 355 2859.61 355C2876.11 354.952 2892.54 356.995 2908.52 361.08C2923.61 364.925 2938.36 370.013 2952.61 376.29C2966.3 382.37 2978.55 388.45 2989.35 394.53L2952.86 463.47Z"
                fill="white"
              />
            </g>
            <defs>
              <clipPath id="clip0_307_11">
                <rect width="3000" height="1074.93" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </div>
      </div>
    </div>
  );
}
